{"ast":null,"code":"var _jsxFileName = \"/Users/allyn/Desktop/learning/udacity-fe/nd0191-c1-myreads/starter/src/App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\nimport { getAll, search } from \"./BooksAPI\";\nimport Home from \"./Home\";\nimport Search from \"./Search\";\nimport \"./App.css\";\nimport { SHELVES } from \"./constants/shelves\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst storedBooks = JSON.parse(window.localStorage.getItem('allBooks'));\nconst storedSearchedBooks = JSON.parse(window.localStorage.getItem('searchedBooks'));\nconst searchQuery = JSON.parse(window.localStorage.getItem('searchQuery'));\nconst App = () => {\n  _s();\n  const [allBooks, setAllBooks] = useState(storedBooks || []);\n  const [searchedBooks, setSearchedBooks] = useState(storedSearchedBooks || []);\n  const [query, setQuery] = useState(searchQuery || \"\");\n  const [categorizedBooks, setCategorizedBooks] = useState({});\n  const changeBookStatus = (selectedBook, status) => {\n    const newBookInfo = allBooks.map(books => {\n      if (books.id === selectedBook.id) {\n        return {\n          ...selectedBook,\n          shelf: status\n        };\n      }\n      return books;\n    });\n    setAllBooks(newBookInfo);\n  };\n  const storeSearchedBooks = function () {\n    let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    setSearchedBooks(data);\n    window.localStorage.setItem('searchedBooks', JSON.stringify(data));\n  };\n  console.log('categorizedBooks', categorizedBooks);\n  const handleInputChange = event => {\n    const query = event.currentTarget.value;\n    setQuery(query);\n    window.localStorage.setItem('searchQuery', JSON.stringify(query));\n    if (!query) {\n      storeSearchedBooks([]);\n    } else {\n      search(query).then(res => storeSearchedBooks(res.error ? [] : res)).catch(err => console.error(err));\n    }\n  };\n  useEffect(() => {\n    if (!allBooks.length) {\n      getAll().then(res => setAllBooks(res)).catch(err => console.error(err));\n    }\n    const categorizedData = {};\n    Object.values(SHELVES).forEach(category => {\n      categorizedData[category] = allBooks.filter(book => book.shelf === category);\n    });\n    setCategorizedBooks(categorizedData);\n    window.localStorage.setItem('allBooks', JSON.stringify(allBooks));\n  }, [allBooks]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Home, {\n          changeBookStatus: changeBookStatus,\n          currentlyReading: categorizedBooks === null || categorizedBooks === void 0 ? void 0 : categorizedBooks.currentlyReading,\n          read: categorizedBooks === null || categorizedBooks === void 0 ? void 0 : categorizedBooks.read,\n          wantToRead: categorizedBooks === null || categorizedBooks === void 0 ? void 0 : categorizedBooks.wantToRead\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/search\",\n        element: /*#__PURE__*/_jsxDEV(Search, {\n          allBooks: allBooks,\n          changeBookStatus: changeBookStatus,\n          searchedBooks: searchedBooks,\n          handleInputChange: handleInputChange,\n          query: query,\n          setAllBooks: setAllBooks\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"Oar6x+fsryiJnIwOP3PJ9XYB680=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","Routes","Route","getAll","search","Home","Search","SHELVES","storedBooks","JSON","parse","window","localStorage","getItem","storedSearchedBooks","searchQuery","App","allBooks","setAllBooks","searchedBooks","setSearchedBooks","query","setQuery","categorizedBooks","setCategorizedBooks","changeBookStatus","selectedBook","status","newBookInfo","map","books","id","shelf","storeSearchedBooks","data","setItem","stringify","console","log","handleInputChange","event","currentTarget","value","then","res","error","catch","err","length","categorizedData","Object","values","forEach","category","filter","book","currentlyReading","read","wantToRead"],"sources":["/Users/allyn/Desktop/learning/udacity-fe/nd0191-c1-myreads/starter/src/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\n\nimport { getAll, search } from \"./BooksAPI\"\nimport Home from \"./Home\";\nimport Search from \"./Search\";\nimport \"./App.css\";\nimport { SHELVES } from \"./constants/shelves\";\n\nconst storedBooks = JSON.parse(window.localStorage.getItem('allBooks'))\nconst storedSearchedBooks = JSON.parse(window.localStorage.getItem('searchedBooks'))\nconst searchQuery = JSON.parse(window.localStorage.getItem('searchQuery'))\n\nconst App = () => {\n  const [ allBooks, setAllBooks ] = useState(storedBooks || [])\n  const [ searchedBooks, setSearchedBooks ] = useState(storedSearchedBooks || [])\n  const [ query, setQuery ] = useState(searchQuery || \"\")\n  const [ categorizedBooks, setCategorizedBooks ] = useState({})\n\n  const changeBookStatus = (selectedBook, status) => {\n    const newBookInfo = allBooks.map((books) => {\n      if (books.id === selectedBook.id) {\n        return {\n          ...selectedBook,\n          shelf: status\n        }\n      }\n      return books\n    })\n    setAllBooks(newBookInfo)\n  }\n\n  const storeSearchedBooks = (data = []) => {\n    setSearchedBooks(data)\n    window.localStorage.setItem('searchedBooks', JSON.stringify(data))\n  }\n\n  console.log('categorizedBooks', categorizedBooks)\n  const handleInputChange = (event) => {\n    const query = event.currentTarget.value;\n\n    setQuery(query)\n    window.localStorage.setItem('searchQuery', JSON.stringify(query))\n\n    if (!query) {\n      storeSearchedBooks([])\n    } else {\n      search(query)\n      .then((res) => storeSearchedBooks(res.error ? [] : res))\n      .catch((err) => console.error(err))\n    }\n  }\n\n  useEffect(() => {\n\n    if (!allBooks.length) {\n      getAll()\n      .then((res) => setAllBooks(res))\n      .catch((err) => console.error(err))\n    }\n\n    const categorizedData = {}\n    Object.values(SHELVES).forEach((category) => {\n      categorizedData[category] = allBooks.filter((book) => book.shelf === category)\n    })\n    setCategorizedBooks(categorizedData)\n\n    window.localStorage.setItem('allBooks', JSON.stringify(allBooks))\n  }, [allBooks])\n  \n  return (\n    <div className=\"app\">\n      <Routes>\n        <Route exact path=\"/\" element={<Home \n            changeBookStatus={changeBookStatus}\n            currentlyReading={categorizedBooks?.currentlyReading}\n            read={categorizedBooks?.read} \n            wantToRead={categorizedBooks?.wantToRead}\n        />}\n        />\n        <Route path=\"/search\" element={<Search\n            allBooks={allBooks}\n            changeBookStatus={changeBookStatus}\n            searchedBooks={searchedBooks}\n            handleInputChange={handleInputChange}\n            query={query}\n            setAllBooks={setAllBooks}\n        />} \n        />\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}